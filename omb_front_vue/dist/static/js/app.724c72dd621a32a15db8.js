webpackJsonp([1],{"/FtC":function(t,e){},0:function(t,e){},"4W58":function(t,e){},Jmt5:function(t,e){},LdnG:function(t,e,a){"use strict";(function(t){a.d(e,"a",function(){return i});var s=a("fZjL"),n=a.n(s),i={data:function(){return{modalComponent:"",modalTitle:"",modalData:"",modalClass:"",tableButtons:[]}},methods:{OK:function(t){this.$swal({title:"OK",html:t,type:"success"})},Ask:function(t,e){this.$swal({title:"Confirme",html:t,type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"OK",cancelButtonText:"Cancelar"}).then(function(t){t.value&&e()})},Err:function(t){this.onReady(),this.$Progress.fail();var e=new Array;if(t.status&&401==t.status)console.log("unauthorized"),location.href="#/login/error";else if(t.data&&t.data.errors)for(var a in t.data.errors)e.push(t.data.errors[a]);else t.data&&t.data.message?e.push(t.data.message):e.push(t);this.$swal({title:"Error",html:e.join("<br>"),type:"error"})},Modal:function(){var e=this;t(".modal").modal("show").on("hidden.bs.modal",function(){e.modalComponent=""})},session:function(t){var e;return!!(e=JSON.parse(localStorage.getItem("app-token")))&&(t?e.data[t]:e.hash)},makeDataTable:function(e){t(e).DataTable({retrieve:!0,dom:"Bfrtip",buttons:this.tableButtons,pageLength:50,autoWidth:!1,language:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún registro encontrado",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Filtrar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}}})},getFormData:function(t){var e=new FormData;return n()(t).forEach(function(a){Array.isArray(t[a])?t[a].forEach(function(t,s){File,e.append(a+"["+s+"]",t)}):e.append(a,t[a])}),e},loadButton:function(e){var a=t(e).find("i").attr("class");t(e).html("<i class = 'fa fa-spinner fa-spin' action = '"+a+"'></i> "+t(e).text()),t(e).attr("disabled","disabled"),t(e).addClass("disabled")},onReady:function(){var e=t(".fa-spin").attr("action");t(".fa-spin").parents("button").removeAttr("disabled").removeClass("disabled"),t(".fa-spin").parents("a").removeAttr("disabled").removeClass("disabled"),e&&t(".fa-spin").parent().html("<i class = '"+e+"'></i> "+t(".fa-spin").parent().text()),t(".fa-spin").remove()}}}}).call(e,a("7t+N"))},LfaV:function(t,e,a){"use strict";(function(t){var s=a("NHnr");e.a={props:["payload"],data:function(){return{list:[],newUser:""}},methods:{display:function(t){return t.name+", "+t.area},save:function(){var e=this;this.newUser&&(this.loadButton(this.$refs.btnSave),this.$http.post("users",this.newUser).then(function(a){e.OK("Guardado"),t(".modal").modal("hide"),s.eventBus.$emit("UserSaved")},function(t){e.Err(t)}))}},created:function(){var t=this;this.$http.get("users/search").then(function(e){t.list=e.data.users},function(e){t.Err(e)})}}}).call(e,a("7t+N"))},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Ombudsperson STRC")]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarColor01"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item "},[a("router-link",{staticClass:"nav-link",attrs:{tag:"a","active-class":"active",to:"/home"}},[t._v("Inicio ")])],1),t._v(" "),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n              Denuncias\n              ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[a("router-link",{staticClass:"dropdown-item",attrs:{tag:"a",to:"/complaints"}},[t._v("Registro")])],1)]),t._v(" "),1==t.session("role")?a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n              Opciones\n              ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[a("router-link",{staticClass:"dropdown-item",attrs:{tag:"a",to:"/users"}},[t._v("Usuarios")]),t._v(" "),a("router-link",{staticClass:"dropdown-item",attrs:{tag:"a",to:"/questions"}},[t._v("Encuesta")]),t._v(" "),a("router-link",{staticClass:"dropdown-item",attrs:{tag:"a",to:"/types"}},[t._v("Tipos de denuncia")])],1)]):t._e(),t._v(" "),1==t.session("role")?a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n              Reportes\n              ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[a("router-link",{staticClass:"dropdown-item",attrs:{tag:"a",to:"/report/general"}},[t._v("Reporte general")])],1)]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]},i={components:{AppMenu:a("VU/8")(null,n,!1,null,null,null).exports},name:"App"},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.session()?e("app-menu"):this._e(),this._v(" "),e("div",{staticClass:"container"},[e("router-view"),this._v(" "),e("vue-progress-bar")],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(t){a("UwY4")},null,null).exports,l=a("/ocq"),c=a("mvHQ"),d=a.n(c),u={props:["usermail"],data:function(){return{loading:!0,logged:!1}},created:function(){var t=this;console.log("login"),localStorage.removeItem("app-token"),console.log(this.usermail),this.usermail&&"error"!=this.usermail?this.$http.post("login",{email:this.usermail}).then(function(e){t.logged=!0,t.loading=!1;var a={data:e.data.token,hash:e.data.hash};localStorage.setItem("app-token",d()(a)),location.href="/"},function(e){t.loading=!1,t.Err(e)}):this.loading=!1}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"login"}},[t.loading?a("div",{staticClass:"form-inline"},[a("i",{staticClass:"fa fa-cog fa-spin fa-spinner fa-2x"}),t._v(" "),a("h1",[t._v(" Cargando... ")])]):t._e(),t._v(" "),t.loading||t.logged?t._e():a("div",{staticClass:"alert alert-danger col-8 offset-2 p-5 mt-5 text-center"},[a("h3",[t._v("Hubo un error cargando su sesión")])])])},staticRenderFns:[]},m=a("VU/8")(u,p,!1,null,null,null).exports,v={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12"},[e("img",{attrs:{src:a("Xx1i"),width:"100%"}}),this._v(" "),e("div",{attrs:{id:"link"}},[this._v("Estoy aquí para escucharte y apoyarte, para más información da click \n        "),e("a",{attrs:{href:"//strc.guanajuato.gob.mx/ombudsperson",target:"_blank"}},[this._v("aquí")])])])}]};var f=a("VU/8")({},v,!1,function(t){a("PGPQ")},"data-v-7b0c0f2a",null).exports,h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("table",{staticClass:"table table-striped table-hover",attrs:{id:"tbl-users"}},[t._m(0),t._v(" "),a("tbody",t._l(t.users,function(e,s){return a("tr",{key:e.id},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.email))]),t._v(" "),a("td",[t._v(t._s(e.area))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-danger btn-sm"},[a("i",{staticClass:"fa fa-trash",on:{click:function(a){t.$emit("UserDelete",e)}}})])])])}))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("Nombre")]),t._v(" "),a("th",[t._v("Email")]),t._v(" "),a("th",[t._v("Área")]),t._v(" "),a("th")])])}]},_={components:{UsersTable:a("VU/8")({props:["users"],updated:function(){this.makeDataTable("#tbl-users")}},h,!1,null,null,null).exports},data:function(){return{users:[]}},methods:{loadUsers:function(){var t=this;this.$http.get("users").then(function(e){t.users=e.data.users},function(e){t.Err(e)})},newUser:function(){this.modalComponent="user-form",this.modalTitle="Nuevo usuario",this.modalData="",this.modalClass="large",this.Modal()},deleteUser:function(t){var e=this;this.Ask("¿Desea eliminar este usuario?",function(){e.$http.delete("users/"+t.id).then(function(a){var s=e.users.map(function(t){return t.id}).indexOf(t.id);e.users.splice(s,1)},function(t){e.Err(t)})})}},created:function(){var t=this;this.loadUsers(),Lt.$on("UserSaved",function(){t.loadUsers()})}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("app-title",[t._v("Usuarios del sistema")]),t._v(" "),a("app-modal",{attrs:{load:t.modalComponent,payload:t.modalData,title:t.modalTitle,size:t.modalClass}}),t._v(" "),a("button",{staticClass:"btn btn-primary mb-3 float-right",on:{click:function(e){t.newUser()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Nuevo usuario")]),t._v(" "),a("users-table",{attrs:{users:t.users},on:{UserDelete:function(e){t.deleteUser(e)}}})],1)},staticRenderFns:[]},b=a("VU/8")(_,g,!1,null,null,null).exports,C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("table",{staticClass:"table table-striped table-hover",attrs:{id:"tbl-questions"}},[t._m(0),t._v(" "),a("tbody",t._l(t.questions,function(e,s){return a("tr",{key:e.id},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.body))]),t._v(" "),a("td",[a("h5",[a("span",{staticClass:"badge badge-pill badge-secondary"},[t._v("\n                            "+t._s(t._f("type")(e.type))+"\n                        ")])])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-warning btn-sm"},[a("i",{staticClass:"fa fa-edit",on:{click:function(a){t.$emit("QuestionEdit",e)}}})]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm"},[a("i",{staticClass:"fa fa-trash",on:{click:function(a){t.$emit("QuestionDelete",e)}}})])])])}))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-dark"},[e("tr",[e("th",{attrs:{width:"30"}},[this._v("#")]),this._v(" "),e("th",[this._v("Pregunta")]),this._v(" "),e("th",{attrs:{width:"100"}},[this._v("Tipo")]),this._v(" "),e("th",{attrs:{width:"100"}})])])}]},y={components:{QuestionsTable:a("VU/8")({props:["questions"],filters:{type:function(t){return"OPEN"==t?"ABIERTA":"CERRADA"}},updated:function(){this.makeDataTable("#tbl-questions")}},C,!1,null,null,null).exports},data:function(){return{questions:[]}},methods:{loadQuestions:function(){var t=this;this.$http.get("questions").then(function(e){t.questions=e.data.questions},function(e){t.Err(e)})},newQuestion:function(){this.modalComponent="question-form",this.modalTitle="Nueva pregunta",this.modalData="",this.Modal()},editQuestion:function(t){this.modalComponent="question-form",this.modalTitle="Editar pregunta",this.modalData=t.id,this.Modal()},deleteQuestion:function(t){var e=this;this.Ask("¿Desea eliminar esta pregunta?",function(){e.$http.delete("questions/"+t.id).then(function(a){var s=e.questions.map(function(t){return t.id}).indexOf(t.id);e.questions.splice(s,1)},function(t){e.Err(t)})})}},created:function(){var t=this;this.loadQuestions(),Lt.$on("QuestionSaved",function(){t.loadQuestions()})}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("app-title",[t._v("Preguntas de encuesta")]),t._v(" "),a("app-modal",{attrs:{load:t.modalComponent,payload:t.modalData,title:t.modalTitle,size:t.modalClass}}),t._v(" "),a("button",{staticClass:"btn btn-primary mb-3 float-right",on:{click:function(e){t.newQuestion()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Nueva pregunta")]),t._v(" "),a("questions-table",{attrs:{questions:t.questions},on:{QuestionEdit:function(e){t.editQuestion(e)},QuestionDelete:function(e){t.deleteQuestion(e)}}})],1)},staticRenderFns:[]},E=a("VU/8")(y,w,!1,null,null,null).exports,x={props:["types"],methods:{edit:function(t){Lt.$emit("TypeEdit",t)}},updated:function(){this.makeDataTable("#tbl-types")}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-striped table-hover",attrs:{id:"tbl-types"}},[t._m(0),t._v(" "),a("tbody",t._l(t.types,function(e,s){return a("tr",{key:e.id},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-warning btn-sm"},[a("i",{staticClass:"fa fa-edit",on:{click:function(a){t.edit(e)}}})]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm"},[a("i",{staticClass:"fa fa-trash",on:{click:function(a){t.$emit("TypeDelete",e.id)}}})])])])}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-dark"},[e("tr",[e("th",{attrs:{width:"30"}},[this._v("#")]),this._v(" "),e("th",[this._v("Tipo")]),this._v(" "),e("th",{attrs:{width:"100"}})])])}]},k={components:{TypesTable:a("VU/8")(x,$,!1,null,null,null).exports},data:function(){return{types:[]}},methods:{loadTypes:function(){var t=this;this.$http.get("types").then(function(e){t.types=e.data.types},function(e){t.Err(e)})},newType:function(){this.modalComponent="type-form",this.modalTitle="Nuevo tipo",this.modalData="",this.Modal()},editType:function(t){this.modalComponent="type-form",this.modalTitle="Editar tipo",this.modalData=t.id,this.Modal()},deleteType:function(t){var e=this;this.Ask("¿Desea eliminar este tipo?",function(){e.$http.delete("types/"+t).then(function(a){var s=e.types.map(function(t){return t.id}).indexOf(t);e.types.splice(s,1)},function(t){e.Err(t)})})}},created:function(){var t=this;this.loadTypes(),Lt.$on("TypeSaved",function(){t.loadTypes()}),Lt.$on("TypeEdit",function(e){t.editType(e)})}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("app-title",[t._v("Tipos de Denuncia")]),t._v(" "),a("app-modal",{attrs:{load:t.modalComponent,payload:t.modalData,title:t.modalTitle,size:t.modalClass}}),t._v(" "),a("div",{staticClass:"col-9 offset-3"},[a("button",{staticClass:"btn btn-primary mb-3 ",on:{click:function(e){t.newType()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Nuevo tipo")])]),t._v(" "),a("div",{staticClass:"col-6 offset-3"},[a("types-table",{attrs:{types:t.types},on:{TypeDelete:function(e){t.deleteType(e)}}})],1)],1)},staticRenderFns:[]},D=a("VU/8")(k,j,!1,null,null,null).exports,N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("table",{staticClass:"table table-striped table-condensed table-hover",attrs:{id:"tbl-comp"}},[t._m(0),t._v(" "),a("tbody",t._l(t.complaint_list,function(e,s){return a("tr",{key:e.id},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(t._f("dateFormat")(e.created_at)))]),t._v(" "),a("td",[t._v(t._s(e.folio)+" / "+t._s(t._f("year")(e.created_at)))]),t._v(" "),a("td",[t._v(t._s(t._f("text")(e.description)))]),t._v(" "),a("td",[t._v(t._s(e.author.name))]),t._v(" "),a("td",[a("h5",[a("span",{staticClass:"badge badge-primary",class:t.getClass(e)},[t._v("\n                            "+t._s(e.status.name)+"\n                        ")])])]),t._v(" "),a("td",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{title:"Abrir"},on:{click:function(a){t.$emit("edit",e)}}},[a("i",{staticClass:"fa fa-folder-open"})]),t._v(" "),e.author.id==t.session("id")?a("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(a){t.$emit("delete",e)}}},[a("i",{staticClass:"fa fa-trash"})]):t._e()])])}))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{width:"30"}},[t._v("#")]),t._v(" "),a("th",[t._v("Fecha")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("Folio")]),t._v(" "),a("th",[t._v("Descripción")]),t._v(" "),a("th",[t._v("Remitente")]),t._v(" "),a("th",[t._v("Estatus")]),t._v(" "),a("th",{attrs:{width:"80"}})])])}]},T={components:{ComplaintTable:a("VU/8")({props:["complaint_list"],methods:{getClass:function(t){return""}},filters:{},updated:function(){this.makeDataTable("#tbl-comp")}},N,!1,null,null,null).exports},data:function(){return{viewList:["Todas las denuncias","Nuevas denuncias","Denuncias cerradas"],viewMode:0,complaints:[]}},computed:{currentView:function(){return this.viewList[this.viewMode]},list:function(){var t=this;if(!this.complaints)return[];if(1!=this.session("role"))return this.complaints.filter(function(e){return e.author.id==t.session("id")});switch(this.viewMode){case 0:return this.complaints;case 1:return this.complaints.filter(function(t){return 1==t.status.id});case 2:return this.complaints.filter(function(t){return 5==t.status.id})}}},methods:{loadComplaints:function(){var t=this;this.$http.get("complaints").then(function(e){t.complaints=e.data.complaints},function(e){t.Err(e)})},newComplaint:function(){this.modalComponent="complaint-form",this.modalTitle="Apertura de denuncia",this.modalData="",this.modalClass="large",this.Modal()},editComplaint:function(t){this.modalComponent="complaint-form",this.modalTitle="Apertura de denuncia",this.modalData=t.id,this.modalClass="large",this.Modal()},deleteComplaint:function(t){var e=this;this.Ask("¿Desea eliminar esta denuncia?",function(){e.$http.delete("complaints/"+t.id).then(function(a){var s=e.complaints.map(function(t){return t.id}).indexOf(t.id);e.complaints.splice(s,1)},function(t){e.Err(t)})})},openComplaint:function(){}},created:function(){var t=this;this.loadComplaints(),Lt.$on("ComplaintLoad",function(){t.loadComplaints()})}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("app-title",[t._v("Registro de denuncias")]),t._v(" "),a("app-modal",{attrs:{load:t.modalComponent,payload:t.modalData,title:t.modalTitle,size:t.modalClass}}),t._v(" "),a("div",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-primary mb-3",on:{click:function(e){t.newComplaint()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Registrar nueva denuncia")])]),t._v(" "),1==t.session("role")?a("div",{staticClass:"col-6"},[a("button",{staticClass:"float-right btn btn-outline-primary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("Mostrar: "+t._s(t.currentView))]),t._v(" "),a("div",{staticClass:"dropdown-menu"},t._l(t.viewList,function(e,s){return a("a",{key:s,staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.viewMode=s}}},[t._v(t._s(e))])}))]):t._e(),t._v(" "),a("complaint-table",{attrs:{complaint_list:t.list},on:{edit:t.editComplaint,delete:t.deleteComplaint,continue:t.openComplaint}})],1)},staticRenderFns:[]},R=a("VU/8")(T,q,!1,null,null,null).exports,A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-9 border border-success rounded p-3"},[a("div",{staticClass:"form-group row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-7"},[a("span",[t._v(t._s(t.data.author.name))])]),t._v(" "),t._m(1),t._v(" "),a("span",{staticClass:"col-1"},[t._v(t._s(t.data.author.age))])]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(2),t._v(" "),a("span",{staticClass:"col-9"},[t._v(t._s(t.data.author.area))])]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(3),t._v(" "),a("span",{staticClass:"col-9"},[t._v(t._s(t.data.author.position))])]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(4),t._v(" "),a("span",{staticClass:"col-9"},[t._v(t._s(t.data.author.boss_name)+", "+t._s(t.data.author.boss_title))])]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(5),t._v(" "),a("span",{staticClass:"col-9"},[t._v(t._s(t.data.type.name))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-3"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Nombre")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-1"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Edad")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-3"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Área")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-3"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Puesto")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-3"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Jefe")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-3"},[e("span",{staticClass:"badge badge-danger badge-pill"},[this._v("Clasificación")])])}]},S=a("VU/8")({props:["data"]},A,!1,null,null,null).exports,F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("form",{on:{submit:function(e){e.preventDefault(),t.saveStatement()}}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header bg-info text-white"},[t._v("\n                Datos de la persona contra se presenta la queja\n            ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group row"},[a("app-label",{staticClass:"col-1"},[t._v("Nombre")]),t._v(" "),a("div",{staticClass:"col-5"},[a("v-select",{attrs:{options:t.users,label:"name"},model:{value:t.complement.user,callback:function(e){t.$set(t.complement,"user",e)},expression:"complement.user"}})],1),t._v(" "),a("app-label",{staticClass:"col-1"},[t._v("Correo")]),t._v(" "),a("span",{staticClass:"col-5"},[t._v(t._s(t.accused.email))])],1),t._v(" "),a("div",{staticClass:"form-group row"},[a("app-label",{staticClass:"col-1"},[t._v("Área")]),t._v(" "),a("span",{staticClass:"col-5"},[t._v(t._s(t.accused.area))]),t._v(" "),a("app-label",{staticClass:"col-1"},[t._v("Puesto")]),t._v(" "),a("span",{staticClass:"col-5"},[t._v(t._s(t.accused.position))])],1),t._v(" "),a("div",{staticClass:"form-group row"},[a("app-label",{staticClass:"col-3"},[t._v("Relación laboral existente")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.accused_relation,expression:"complement.accused_relation"}],staticClass:"form-control col-8",attrs:{type:"text",placeholder:"Describa la relación con la persona"},domProps:{value:t.complement.accused_relation},on:{input:function(e){e.target.composing||t.$set(t.complement,"accused_relation",e.target.value)}}})],1)])]),t._v(" "),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header bg-dark text-white"},[t._v("\n                Declaración completa\n            ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"alert alert-info"},[t._v("\n                    A continuación, le pedimos que escriba con tinta y letra clara, marcando el inciso correspondiente o en su caso, conteste las preguntas.\n                ")]),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("¿De qué forma se manifestó el hecho sobre el que presenta su queja?")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.facts,expression:"complement.facts"}],staticClass:"form-control",attrs:{rows:"3",required:""},domProps:{value:t.complement.facts},on:{input:function(e){e.target.composing||t.$set(t.complement,"facts",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group row"},[a("app-label",{staticClass:"col-4"},[t._v("¿Con qué frecuencia ha ocurrido?")]),t._v(" "),a("div",{staticClass:"form-inline col-8"},t._l(t.frecuencies,function(e){return a("label",{key:e.key,staticClass:"mx-3 text-uppercase"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.frequency,expression:"complement.frequency"}],staticClass:"m-1",attrs:{type:"radio"},domProps:{value:e.key,checked:t._q(t.complement.frequency,e.key)},on:{change:function(a){t.$set(t.complement,"frequency",e.key)}}}),t._v("\n                           "+t._s(e.value)+"\n                       ")])}))],1),t._v(" "),"ONCE"==t.complement.frequency?a("div",{staticClass:"form-group row"},[a("app-label",{staticClass:"col-1"},[t._v("Fecha")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.date_since,expression:"complement.date_since"}],staticClass:"col-2 form-control",attrs:{type:"date",required:""},domProps:{value:t.complement.date_since},on:{input:function(e){e.target.composing||t.$set(t.complement,"date_since",e.target.value)}}}),t._v(" "),a("app-label",{staticClass:"col-1"},[t._v("Hora")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.time,expression:"complement.time"}],staticClass:"col-2 form-control",attrs:{type:"time",required:""},domProps:{value:t.complement.time},on:{input:function(e){e.target.composing||t.$set(t.complement,"time",e.target.value)}}}),t._v(" "),a("app-label",{staticClass:"col-1"},[t._v("Lugar")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.place,expression:"complement.place"}],staticClass:"col-5 form-control",attrs:{type:"text",placeholder:"Lugar",required:""},domProps:{value:t.complement.place},on:{input:function(e){e.target.composing||t.$set(t.complement,"place",e.target.value)}}})],1):t.complement.frequency?[a("div",{staticClass:"form-group row"},[a("app-label",{staticClass:"col-1"},[t._v("Desde")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.date_since,expression:"complement.date_since"}],staticClass:"col-3 form-control",attrs:{type:"date",required:""},domProps:{value:t.complement.date_since},on:{input:function(e){e.target.composing||t.$set(t.complement,"date_since",e.target.value)}}}),t._v(" "),a("app-label",{staticClass:"col-1"},[t._v("Hasta")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.date_until,expression:"complement.date_until"}],staticClass:"col-3 form-control",attrs:{type:"date",required:""},domProps:{value:t.complement.date_until},on:{input:function(e){e.target.composing||t.$set(t.complement,"date_until",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("Lugares de ocurrencia")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.place,expression:"complement.place"}],staticClass:"form-control",attrs:{placeholder:"Describa los lugares",required:""},domProps:{value:t.complement.place},on:{input:function(e){e.target.composing||t.$set(t.complement,"place",e.target.value)}}})],1)]:t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("La actitud de la persona que le hostigó, acosó o violentó fue")]),t._v(" "),a("div",{staticClass:"form-inline"},t._l(t.attitudes,function(e){return a("label",{key:e.key,staticClass:"mx-3 text-uppercase"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.attitude,expression:"complement.attitude"}],staticClass:"m-1",attrs:{type:"radio"},domProps:{value:e.key,checked:t._q(t.complement.attitude,e.key)},on:{change:function(a){t.$set(t.complement,"attitude",e.key)}}}),t._v("\n                           "+t._s(e.value)+"\n                       ")])}))],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("La reacción inmediata de usted ante la(s) conducta(s) de ésa persona fue:")]),t._v(" "),a("div",{staticClass:"form-inline"},[t._l(t.reactions,function(e){return a("label",{key:e.key,staticClass:"mx-3 text-uppercase"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.reaction,expression:"complement.reaction"}],staticClass:"m-1",attrs:{type:"radio"},domProps:{value:e.key,checked:t._q(t.complement.reaction,e.key)},on:{change:function(a){t.$set(t.complement,"reaction",e.key)}}}),t._v("\n                           "+t._s(e.value)+"\n                       ")])}),t._v(" "),a("label",{staticClass:"mx-3 text-uppercase"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.reaction,expression:"complement.reaction"}],staticClass:"m-1",attrs:{type:"radio",value:""},domProps:{checked:t._q(t.complement.reaction,"")},on:{change:function(e){t.$set(t.complement,"reaction","")}}}),t._v("\n                           OTRO\n                       ")]),t._v(" "),t.otherValue("reaction")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.reaction,expression:"complement.reaction"}],staticClass:"col-7 form-control ",attrs:{type:"text",placeholder:"Explique",required:""},domProps:{value:t.complement.reaction},on:{input:function(e){e.target.composing||t.$set(t.complement,"reaction",e.target.value)}}}):t._e()],2)],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("Mencione si su caso es aislado o conoce de otras personas que hayan sido objeto de esos mismos hechos por parte de la persona agresora")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.other_cases,expression:"complement.other_cases"}],staticClass:"form-control",attrs:{placeholder:"Otros casos similares"},domProps:{value:t.complement.other_cases},on:{input:function(e){e.target.composing||t.$set(t.complement,"other_cases",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("Señale si existieron testigos cuando acontecieron los hechos de la presente queja:")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.witnesses,expression:"complement.witnesses"}],staticClass:"form-control",attrs:{placeholder:"Datos de los testigos, en su caso"},domProps:{value:t.complement.witnesses},on:{input:function(e){e.target.composing||t.$set(t.complement,"witnesses",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("¿Qué cambios en su situación laboral se dieron a partir de los hechos?")]),t._v(" "),a("div",{staticClass:"form-inline"},[t._l(t.changes,function(e){return a("label",{key:e.key,staticClass:"mx-3 text-uppercase"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.made_changes,expression:"complement.made_changes"}],staticClass:"m-1",attrs:{type:"radio"},domProps:{value:e.key,checked:t._q(t.complement.made_changes,e.key)},on:{change:function(a){t.$set(t.complement,"made_changes",e.key)}}}),t._v("\n                           "+t._s(e.value)+"\n                       ")])}),t._v(" "),a("label",{staticClass:"mx-3 text-uppercase",attrs:{for:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.made_changes,expression:"complement.made_changes"}],staticClass:"m-1",attrs:{type:"radio",value:""},domProps:{checked:t._q(t.complement.made_changes,"")},on:{change:function(e){t.$set(t.complement,"made_changes","")}}}),t._v("\n                           Otro\n                       ")])],2)],1),t._v(" "),a("div",{staticClass:"form-group"},[t.otherValue("change")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.made_changes,expression:"complement.made_changes"}],staticClass:" form-control ",attrs:{type:"text",placeholder:"Explique",required:""},domProps:{value:t.complement.made_changes},on:{input:function(e){e.target.composing||t.$set(t.complement,"made_changes",e.target.value)}}}):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("¿De qué forma le afectaron los hechos de los que se queja?")]),t._v(" "),a("div",{staticClass:"form-inline"},t._l(t.affectations,function(e){return a("label",{key:e.key,staticClass:"mx-3 text-uppercase"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.complement.affectation,expression:"complement.affectation"}],staticClass:"m-1",attrs:{type:"radio"},domProps:{value:e.key,checked:t._q(t.complement.affectation,e.key)},on:{change:function(a){t.$set(t.complement,"affectation",e.key)}}}),t._v("\n                           "+t._s(e.value)+"\n                       ")])}))],1),t._v(" "),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.affect_info,expression:"complement.affect_info"}],staticClass:"form-control",attrs:{placeholder:"Describa el tipo de afectación sufrida"},domProps:{value:t.complement.affect_info},on:{input:function(e){e.target.composing||t.$set(t.complement,"affect_info",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("¿Considera que el acoso u hostigamiento que sufrió le afectará a largo plazo?")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.long_term_considerations,expression:"complement.long_term_considerations"}],staticClass:"form-control",attrs:{placeholder:"Describa las posibles consecuencias"},domProps:{value:t.complement.long_term_considerations},on:{input:function(e){e.target.composing||t.$set(t.complement,"long_term_considerations",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("¿Cree necesario acudir con una/un experta/o para que le apoye a superar los efectos psicológicos causados?")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.psy_support,expression:"complement.psy_support"}],staticClass:"form-control",attrs:{placeholder:"Describa en su caso"},domProps:{value:t.complement.psy_support},on:{input:function(e){e.target.composing||t.$set(t.complement,"psy_support",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("¿Cree necesario recibir atención médica?")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.medical_support,expression:"complement.medical_support"}],staticClass:"form-control",attrs:{placeholder:"Describa en su caso"},domProps:{value:t.complement.medical_support},on:{input:function(e){e.target.composing||t.$set(t.complement,"medical_support",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("¿Comunicó estos hechos a su superior jerárquico?")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.boss_knowledge,expression:"complement.boss_knowledge"}],staticClass:"form-control",attrs:{placeholder:"Describa en su caso"},domProps:{value:t.complement.boss_knowledge},on:{input:function(e){e.target.composing||t.$set(t.complement,"boss_knowledge",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("¿Cómo piensa que se puede resolver este problema?")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.solution,expression:"complement.solution"}],staticClass:"form-control",attrs:{placeholder:"Describa en sus palabras la posible solución"},domProps:{value:t.complement.solution},on:{input:function(e){e.target.composing||t.$set(t.complement,"solution",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("¿Para dar un fundamento a los hechos se cuenta con algún tipo de evidencia?")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.evidence,expression:"complement.evidence"}],staticClass:"form-control",attrs:{placeholder:"Describa en su caso"},domProps:{value:t.complement.evidence},on:{input:function(e){e.target.composing||t.$set(t.complement,"evidence",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("Datos e información adicional que considere necesario aportar para el seguimiento de su queja:")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complement.aditional_info,expression:"complement.aditional_info"}],staticClass:"form-control",attrs:{placeholder:"Describa en su caso"},domProps:{value:t.complement.aditional_info},on:{input:function(e){e.target.composing||t.$set(t.complement,"aditional_info",e.target.value)}}})],1)],2),t._v(" "),t.data.status.id<3?a("div",{staticClass:"card-footer"},[a("button",{ref:"btnStatement",staticClass:"btn btn-danger btn-lg float-right"},[a("i",{staticClass:"fa fa-pencil"}),t._v(" Guardar declaración")])]):t._e()])])])},staticRenderFns:[]},O=a("VU/8")({props:["data"],data:function(){return{users:[],complement:{user:""},frecuencies:[{key:"ONCE",value:"UNA SÓLA VÉZ"},{key:"SEVERAL",value:"VARIAS VECES"},{key:"CONSTANT",value:"CONTINUAMENTE"}],attitudes:[{key:"OPEN",value:"ABIERTA Y CLARA"},{key:"THREAT",value:"AMENAZANTE"},{key:"SUBTLE",value:"DISCRETA Y SUTIL"}],reactions:[{key:"FACE",value:"LO CONFRONTÉ"},{key:"IGNORE",value:"LO IGNORÉ"}],changes:[{key:"SAME",value:"Sigue igual"},{key:"AWKWARD",value:"Es tensa e incómoda"},{key:"TRASFERED",value:"Fui asignado/a a otra área"}],affectations:[{key:"EMOTIONAL",value:"Emocional"},{key:"SOCIAL",value:"Social"},{key:"WORKING",value:"Laboral"}]}},computed:{accused:function(){return this.complement.user}},methods:{otherValue:function(t){switch(t){case"reaction":return this.reactions.map(function(t){return t.key}).indexOf(this.complement.reaction)<0;case"change":return this.changes.map(function(t){return t.key}).indexOf(this.complement.made_changes)<0;case"affectation":return this.affectations.map(function(t){return t.key}).indexOf(this.complement.affectation)<0}},saveStatement:function(){var t=this;this.loadButton(this.$refs.btnStatement),this.$http.post("complaints/statement/"+this.data.id,this.complement).then(function(e){t.onReady(),t.OK("Declaración guardada"),t.$emit("update",e.data.complaint)},function(e){t.Err(e)})}},created:function(){var t=this;this.$http.get("users/search").then(function(e){t.users=e.data.users},function(e){t.Err(e)}),this.data.status.id>2&&(this.complement=this.data,this.complement.user=this.data.accused)}},F,!1,null,null,null).exports,P=a("Gu7T"),M=a.n(P),U=a("PJh5"),L=a.n(U),V={props:["tracing","data"],data:function(){return{all:[],events:[],viewCalendar:1==this.session("role")?"ALL":"THIS",showDate:new Date,timeFormat:new Intl.DateTimeFormat("en-US",{hour12:!1,hour:"numeric",minute:"numeric"}).resolvedOptions()}},computed:{calendar:function(){return"ALL"==this.viewCalendar?[].concat(M()(this.all),M()(this.events)):this.events},viewLabel:function(){return"ALL"==this.viewCalendar?"TODOS LOS EVENTOS":"SOLO DE ESTE CASO"},stillModify:function(){return 1==this.session("role")&&this.data.status.id<5},lastEvent:function(){return L()(this.events[this.events.length-1].startDate).toDate()}},methods:{setShowDate:function(t){this.showDate=t},newEvent:function(t){this.stillModify&&this.$emit("newEvent",t)},viewEvent:function(t){this.$emit("viewEvent",t)},setEvents:function(){this.events=this.tracing.map(function(t){return{id:t.id,title:"<strong>"+t.type+"</strong> <small>"+t.subject+"</small>",startDate:L()(t.meeting_date).format("YYYY-MM-DD HH:mm"),classes:"calendar-event"}})}},watch:{tracing:function(){this.setEvents()}},created:function(){var t=this;this.$http.get("tracings").then(function(e){t.all=e.data.events.filter(function(e){return e.complaint_id!=t.data.id}).map(function(t){return{id:t.id,title:"<strong>"+t.type+"</strong> <small>"+t.subject+"</small>",startDate:L()(t.meeting_date).format("YYYY-MM-DD HH:mm"),classes:"calendar-all"}})},function(e){t.Err(e)}),this.setEvents(),this.setShowDate(this.lastEvent)}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("div",{staticClass:"row my-4"},[a("h3",{staticClass:"col-4"},[t._v("Seguimiento del caso")]),t._v(" "),a("div",{staticClass:"col-4 text-center"},[a("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.$emit("viewList")}}},[t._v("Ver lista completa")])]),t._v(" "),1==t.session("role")?a("div",{staticClass:"col-4"},[a("button",{staticClass:"float-right btn btn-outline-primary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("Mostrar: "+t._s(t.viewLabel))]),t._v(" "),a("div",{staticClass:"dropdown-menu"},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.viewCalendar="ALL"}}},[t._v("TODOS LOS EVENTOS")]),t._v(" "),a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.viewCalendar="THIS"}}},[t._v("SOLO DE ESTE CASO")])])]):t._e()]),t._v(" "),a("calendar-view",{staticStyle:{"min-height":"600px"},attrs:{"show-date":t.showDate,showEventTimes:!0,events:t.calendar,timeFormatOptions:t.timeFormat},on:{"show-date-change":t.setShowDate,"click-date":t.newEvent,"click-event":t.viewEvent}})],1)},staticRenderFns:[]};var z=a("VU/8")(V,B,!1,function(t){a("OoQs")},null,null).exports,I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 offset-2"},[a("h3",[t._v("Cierre de denuncia")]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.closeComplaint(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Procedimiento iniciado")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.close.procedure.type,expression:"close.procedure.type"}],staticClass:"form-control",class:{"form-control-plaintext":!t.stillModify},attrs:{disabled:!t.stillModify,required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.close.procedure,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"INFORMAL"}},[t._v("INFORMAL")]),t._v(" "),a("option",{attrs:{value:"ADMINISTRATIVO"}},[t._v("ADMINISTRATIVO")]),t._v(" "),a("option",{attrs:{value:"LABORAL"}},[t._v("LABORAL")]),t._v(" "),a("option",{attrs:{value:"PENAL"}},[t._v("PENAL")])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Descripción")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.close.procedure.description,expression:"close.procedure.description"}],staticClass:"form-control",class:{"form-control-plaintext":!t.stillModify},attrs:{rows:"5",disabled:!t.stillModify,placeholder:"Descripción del procedimiento en su caso"},domProps:{value:t.close.procedure.description},on:{input:function(e){e.target.composing||t.$set(t.close.procedure,"description",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tipo de resolución")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.close.resolution_id,expression:"close.resolution_id"}],staticClass:"form-control",class:{"form-control-plaintext":!t.stillModify},attrs:{disabled:!t.stillModify,required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.close,"resolution_id",e.target.multiple?a:a[0])}}},t._l(t.resolutions,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))]),t._v(" "),a("p",[t.stillModify?a("button",{ref:"btnClose",staticClass:"btn btn-danger btn-lg float-right"},[a("i",{staticClass:"fa fa-check-square-o"}),t._v(" Cerrar denuncia")]):t._e()])])])},staticRenderFns:[]},Q=a("VU/8")({props:["data"],data:function(){return{close:{procedure:{}},resolutions:[]}},computed:{stillModify:function(){return 1==this.session("role")&&this.data.status.id<5}},methods:{closeComplaint:function(){var t=this;this.loadButton(this.$refs.btnClose),this.$http.post("complaints/close/"+this.data.id,this.close).then(function(e){t.onReady(),t.OK("Denuncia cerrada"),t.$emit("close",e.data.complaint)},function(e){t.Err(e)})}},created:function(){var t=this;this.data.procedure&&(this.close.procedure=this.data.procedure,this.close.resolution_id=this.data.resolution_id),this.$http.get("complaints/resolution").then(function(e){t.resolutions=e.data.resolutions})}},I,!1,null,null,null).exports,H={props:["data"],data:function(){return{apiRoot:"//ombudsperson.strc.guanajuato.gob.mx/api/",newFile:{complaint_id:this.data.id,source:"LOCAL"},files:[]}},computed:{stillModify:function(){return 1==this.session("role")&&this.data.status.id<5}},methods:{addFile:function(t){this.newFile.file=t.target.files[0]},saveFile:function(){var t=this,e=this.getFormData(this.newFile);this.loadButton(this.$refs.btnUpload),this.$http.post("file",e).then(function(e){t.onReady(),t.OK("Archivo guardado"),t.files.unshift(e.data.file),t.newFile.document="",t.newFile.file=null},function(e){t.Err(e)})},deleteFile:function(t){var e=this;this.Ask("¿Desea eliminar este archivo?",function(){e.$http.delete("file/"+t.id).then(function(a){var s=e.files.map(function(t){return t.id}).indexOf(t.id);e.files.splice(s,1)},function(t){e.Err(t)})})}},created:function(){var t=this;this.$http.get("file/"+this.data.id).then(function(e){t.files=e.data.files},function(e){t.Err(e)})}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("div",{staticClass:"col-10 offset-1"},[a("h3",[t._v("Expediente digital")]),t._v(" "),t.stillModify?a("form",{on:{submit:function(e){return e.preventDefault(),t.saveFile(e)}}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header bg-primary text-white"},[t._v("\n                    Cargar nuevo archivo\n                ")]),t._v(" "),a("div",{staticClass:"card-body"},["LOCAL"==t.newFile.source?[a("div",{staticClass:"form-group"},[a("app-label",[t._v("Nombre del archivo")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newFile.document,expression:"newFile.document"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.newFile.document},on:{input:function(e){e.target.composing||t.$set(t.newFile,"document",e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("app-label",[t._v("Seleccionar archivo")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"file",required:""},on:{change:function(e){t.addFile(e)}}})],1)]:t._e()],2),t._v(" "),a("div",{staticClass:"card-footer"},[a("button",{ref:"btnUpload",staticClass:"btn btn-primary btn-lg float-right"},[a("i",{staticClass:"fa fa-upload"}),t._v(" Guardar")])])])]):t._e(),t._v(" "),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header bg-success text-white"},[t._v("\n                Lista de archivos\n            ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("table",{staticClass:"table table-striped table-hover"},[t._m(0),t._v(" "),t._l(t.files,function(e,s){return a("tr",{key:e.id},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.document))]),t._v(" "),a("td",{staticClass:"text-center"},[a("a",{attrs:{target:"_blank",href:"//"+t.apiRoot+"file/download/"+e.path.replace("documents/","")}},[a("i",{staticClass:"fa fa-file fa-2x"})])]),t._v(" "),a("td",{staticClass:"text-center"},[t.stillModify?a("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(a){t.deleteFile(e)}}},[a("i",{staticClass:"fa fa-trash"})]):t._e()])])})],2)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-light"},[e("th",[this._v("#")]),this._v(" "),e("th",[this._v("Archivo")]),this._v(" "),e("th",{attrs:{width:"30"}},[this._v("Descargar")]),this._v(" "),e("th",{attrs:{width:"30"}},[this._v("Eliminar")])])}]},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.survey?a("div",{staticClass:"col-12"},[a("div",{staticClass:"alert alert-info text-center"},[t._v("Por favor responda las siguientes preguntas sobre su nivel de satisfacción en el proceso")]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.saveSurvey(e)}}},[a("table",{staticClass:"table table-striped table-hover"},[t._l(t.survey,function(e,s){return[a("tr",{staticClass:"table-dark"},[a("td",{staticClass:"row"},[a("app-label",{staticClass:"col-1"},[t._v(t._s(s+1))]),t._v(" "),a("span",{staticClass:"col-11"},[t._v(t._s(e.body))])],1)]),t._v(" "),a("tr",[a("td",["OPEN"==e.type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.response[e.id],expression:"response[question.id]"}],staticClass:"form-control",attrs:{placeholder:"Respuesta",required:""},domProps:{value:t.response[e.id]},on:{input:function(a){a.target.composing||t.$set(t.response,e.id,a.target.value)}}}):a("div",{staticClass:"form-inline row"},t._l(t.options,function(s,n){return a("label",{key:n,staticClass:"col"},[t._v("\n                                "+t._s(s)+"\n                                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.response[e.id],expression:"response[question.id]"}],staticClass:"mx-2",attrs:{type:"radio"},domProps:{value:n,checked:t._q(t.response[e.id],n)},on:{change:function(a){t.$set(t.response,e.id,n)}}})])}))])])]})],2),t._v(" "),a("p",[a("button",{ref:"btnSurvey",staticClass:"btn btn-success btn-lg float-right mb-3"},[a("i",{staticClass:"fa fa-edit"}),t._v(" Guardar")])])])]):a("div",{staticClass:"col-6 offset-3 text-center"},[t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert alert-dark"},[e("h5",[this._v("Ya ha sido respondido esta encuesta. Gracias")])])}]},K={props:["id"],components:{ViewInfo:S,ViewDetails:O,ViewTracing:z,ViewFiles:a("VU/8")(H,Y,!1,null,null,null).exports,ViewClosing:Q,ViewSurvey:a("VU/8")({props:["data"],data:function(){return{survey:[],options:["Muy malo","Malo","Regular","Bueno","Muy bueno"],response:[]}},computed:{questions:function(){return this.survey.map(function(t){return t.id})},fullSurvey:function(){var t=this;return 0==this.response.filter(function(e,a){return""===e&&t.questions.indexOf(a)>-1}).length}},methods:{saveSurvey:function(){var t=this;this.fullSurvey?(this.loadButton(this.$refs.btnSurvey),this.$http.post("survey/"+this.data.id,this.response).then(function(e){t.OK("Gracias!"),t.survey=null},function(e){t.Err(e)})):this.Err("Favor de completar la encuesta")}},created:function(){var t=this;this.$http.get("survey/"+this.data.id).then(function(e){t.survey=e.data.survey,t.survey&&t.survey.forEach(function(e){t.response[e.id]=""})},function(e){t.Err(e)})}},G,!1,null,null,null).exports},data:function(){return{loading:!0,complaint:{author:{},status:{}}}},computed:{events:function(){return this.complaint.tracings}},methods:{newEvent:function(t){this.modalComponent="complaint-event",this.modalTitle="Nuevo evento",this.modalData={data:this.complaint,date:t},this.modalClass="",this.Modal()},viewEvent:function(t){this.modalComponent="complaint-event",this.modalTitle="Ver evento",this.modalData={data:this.complaint,event:t},this.modalClass="",this.Modal()},viewTracing:function(){this.modalComponent="complaint-history",this.modalTitle="Historial de seguimiento",this.modalData=this.complaint.id,this.modalClass="large",this.Modal()}},created:function(){var t=this;this.$http.get("complaints/"+this.id).then(function(e){t.loading=!1,1!=t.session("role")&&e.data.complaint.author.id!=t.session("id")||(t.complaint=e.data.complaint)},function(e){t.Err(e)}),Lt.$on("EventSaved",function(e){var a=t.complaint.tracings.map(function(t){return t.id}).indexOf(e.id);a>-1&&t.complaint.tracings.splice(a,1),t.complaint.tracings.push(e)}),Lt.$on("EventDeleted",function(e){console.log(e);var a=t.complaint.tracings.map(function(t){return t.id}).indexOf(e.id);t.complaint.tracings.splice(a,1)}),Lt.$on("EventOpen",function(e){t.viewEvent(e)})}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("app-title",[t._v("Denuncia: "),a("span",{staticClass:"badge badge-dark"},[t._v(t._s(t.complaint.folio)+" / "+t._s(t._f("year")(t.complaint.created_at))+": "),a("small",[t._v(t._s(t.complaint.author.name))])])]),t._v(" "),a("app-modal",{attrs:{load:t.modalComponent,payload:t.modalData,title:t.modalTitle,size:t.modalClass}}),t._v(" "),t.loading?[t._m(0)]:t._e(),t._v(" "),2==t.complaint.status_id&&t.complaint.author.id==t.session("id")?a("div",{staticClass:"alert alert-danger"},[a("h4",[t._v("Por favor proceda a completar la información correspondiente de su DENUNCIA en el apartado señalado debajo")])]):t._e(),t._v(" "),!t.loading&&t.complaint.id?[a("ul",{staticClass:"nav nav-pills mb-4",attrs:{id:"pills-tab",role:"tablist"}},[t._m(1),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:"pills-home-tab","data-toggle":"pill",href:"#details",role:"tab","aria-controls":"pills-home","aria-selected":"true"}},[t._v("Detalles de denuncia "),2==t.complaint.status_id?a("span",{staticClass:"badge badge-pill badge-danger"},[a("i",{staticClass:"fa fa-exclamation-triangle"})]):t._e()])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:"pills-home-tab","data-toggle":"pill",href:"#tracing",role:"tab","aria-controls":"pills-home","aria-selected":"true"}},[t._v(t._s(0==t.session("role")&&2==t.complaint.status.id?"Entrevista programada":"Seguimiento")+" ")])]),t._v(" "),t.complaint.status.id>2?[t._m(2),t._v(" "),t._m(3)]:t._e(),t._v(" "),5==t.complaint.status.id&&t.session("id")==t.complaint.author.id?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:"pills-home-tab","data-toggle":"pill",href:"#survey",role:"tab","aria-controls":"pills-home","aria-selected":"true"}},[t._v("Encuesta")])]):t._e()],2),t._v(" "),a("div",{staticClass:"tab-content",attrs:{id:"pills-tabContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"info",role:"tabpanel","aria-labelledby":"pills-home-tab"}},[a("view-info",{attrs:{data:t.complaint}})],1),t._v(" "),a("div",{staticClass:"tab-pane fade show ",attrs:{id:"details",role:"tabpanel","aria-labelledby":"pills-home-tab"}},[a("view-details",{attrs:{data:t.complaint},on:{update:function(e){t.complaint=e}}})],1),t._v(" "),a("div",{staticClass:"tab-pane fade show ",attrs:{id:"tracing",role:"tabpanel","aria-labelledby":"pills-home-tab"}},[a("view-tracing",{attrs:{data:t.complaint,tracing:t.events},on:{newEvent:t.newEvent,viewEvent:t.viewEvent,viewList:t.viewTracing}})],1),t._v(" "),t.complaint.status.id>2?[a("div",{staticClass:"tab-pane fade show ",attrs:{id:"files",role:"tabpanel","aria-labelledby":"pills-home-tab"}},[a("view-files",{attrs:{data:t.complaint}})],1),t._v(" "),a("div",{staticClass:"tab-pane fade show ",attrs:{id:"closing",role:"tabpanel","aria-labelledby":"pills-home-tab"}},[a("view-closing",{attrs:{data:t.complaint},on:{close:function(e){t.complaint.status=e.status}}})],1)]:t._e(),t._v(" "),5==t.complaint.status.id&&t.session("id")==t.complaint.author.id?a("div",{staticClass:"tab-pane fade show ",attrs:{id:"survey",role:"tabpanel","aria-labelledby":"pills-home-tab"}},[a("view-survey",{attrs:{data:t.complaint}})],1):t._e()],2)]:t._e(),t._v(" "),t.loading||t.complaint.id?t._e():[t._m(4)]],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",[this._v("Abriendo información.... "),e("i",{staticClass:"fa fa-cog fa-spin"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active",attrs:{id:"pills-home-tab","data-toggle":"pill",href:"#info",role:"tab","aria-controls":"pills-home","aria-selected":"true"}},[this._v("Datos generales")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{id:"pills-home-tab","data-toggle":"pill",href:"#files",role:"tab","aria-controls":"pills-home","aria-selected":"true"}},[this._v("Expediente")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{id:"pills-home-tab","data-toggle":"pill",href:"#closing",role:"tab","aria-controls":"pills-home","aria-selected":"true"}},[this._v("Resolución")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert alert-danger"},[e("h3",[this._v("No cuenta con permisos para ver esta información")])])}]},X=a("VU/8")(K,W,!1,null,null,null).exports,J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-striped",attrs:{id:"tbl-report"}},[t._m(0),t._v(" "),a("tbody",t._l(t.report,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.folio)+"/"+t._s(t._f("year")(e.created_at)))]),t._v(" "),a("td",[t._v(t._s(e.type.name))]),t._v(" "),a("td",[t._v(t._s(e.author.name))]),t._v(" "),a("td",[t._v(t._s(e.accused?e.accused.name:""))]),t._v(" "),a("td",[t._v(t._s(t._f("dateFormat")(e.created_at,!0)))]),t._v(" "),a("td",[t._v(t._s(e.status.name))]),t._v(" "),a("td",[t._v(t._s(e.procedure?e.procedure.type:""))]),t._v(" "),a("td",[t._v(t._s(e.resolution?e.resolution.name:""))])])}))])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("Folio")]),t._v(" "),a("th",[t._v("Clasif.")]),t._v(" "),a("th",[t._v("Remitente")]),t._v(" "),a("th",[t._v("Acusado")]),t._v(" "),a("th",[t._v("Fecha")]),t._v(" "),a("th",[t._v("Estatus")]),t._v(" "),a("th",[t._v("Procedimiento")]),t._v(" "),a("th",[t._v("Resolución")])])])}]},Z={components:{ReportTable:a("VU/8")({props:["report"],updated:function(){this.tableButtons=[{extend:"pdf",text:"Exportar PDF",filename:"Reporte",title:"Reporte Denuncias",orientation:"landscape"}],this.makeDataTable("#tbl-report")}},J,!1,null,null,null).exports},data:function(){return{report:[]}},created:function(){var t=this;this.$http.get("complaints/report").then(function(e){t.report=e.data.report},function(e){t.Err(e)})}},tt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12"},[e("app-title",[this._v("Reporte general de denuncias")]),this._v(" "),e("report-table",{attrs:{report:this.report}})],1)},staticRenderFns:[]},et=a("VU/8")(Z,tt,!1,null,null,null).exports;s.a.use(l.a);var at=new l.a({routes:[{path:"",redirect:"/home"},{path:"/login/:usermail",component:m,name:"login",props:!0},{path:"/home",component:f},{path:"/users",component:b},{path:"/questions",component:E},{path:"/types",component:D},{path:"/complaints",component:R},{path:"/complaints/open/:id",component:X,props:!0},{path:"/report/general",component:et},{path:"*",redirect:"/login/error"}]});at.beforeEach(function(t,e,a){"login"==t.name||localStorage.getItem("app-token")?a():(console.log(t),a("/login/error"))});var st=a("8+8L"),nt=a("oYt9"),it=a("zYko"),ot=a.n(it),rt=a("LdnG"),lt=(a("Jmt5"),a("K3J8"),a("MdAA"),a("EWlk")),ct=a.n(lt),dt=a("u1n8"),ut=a.n(dt),pt=(a("/FtC"),a("FNwM"),a("122j"),a("wtxW"),a("c1OQ"),a("e0XP"),a("kBvZ"),a("4W58"),{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade in",attrs:{tabindex:"-1",role:"dialog"}},[a("div",{class:t.cls,attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"modal-body"},[a(t.load,{tag:"component",attrs:{payload:t.payload}})],1),t._v(" "),t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Cerrar")])])}]}),mt=a("VU/8")({props:["load","title","payload","size"],computed:{cls:function(){return"modal-dialog "+("large"==this.size?"modal-lg ":"")+("small"==this.size?"modal-sm ":"")}}},pt,!1,null,null,null).exports,vt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12"},[e("h1",{staticClass:"display-5 mt-3"},[this._t("default")],2),e("hr")])},staticRenderFns:[]},ft=a("VU/8")(null,vt,!1,null,null,null).exports,ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("h5",[e("span",{class:this.cls,staticStyle:{"white-space":"normal"}},[this._t("default")],2)])},staticRenderFns:[]},_t=a("VU/8")({props:["col","color"],computed:{cls:function(){return"badge badge-pill badge-"+(this.color||"secondary")}}},ht,!1,null,null,null).exports,gt=a("LfaV"),bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){e.preventDefault(),t.save()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Seleccione")]),t._v(" "),a("v-select",{attrs:{options:t.list,"get-option-label":t.display,label:"name"},model:{value:t.newUser,callback:function(e){t.newUser=e},expression:"newUser"}})],1),t._v(" "),a("p",[a("button",{ref:"btnSave",staticClass:"btn btn-success btn-lg"},[a("i",{staticClass:"fa fa-save"}),t._v(" Guardar")])])])},staticRenderFns:[]},Ct=a("VU/8")(gt.a,bt,!1,null,null,null).exports,yt=a("oQzf"),wt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){e.preventDefault(),t.save()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Pregunta")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newQuestion.body,expression:"newQuestion.body"}],staticClass:"form-control",attrs:{placeholder:"Cuerpo de la pregunta",required:""},domProps:{value:t.newQuestion.body},on:{input:function(e){e.target.composing||t.$set(t.newQuestion,"body",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tipo de pregunta")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newQuestion.type,expression:"newQuestion.type"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.newQuestion,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"CLOSED"}},[t._v("CERRADA")]),t._v(" "),a("option",{attrs:{value:"OPEN"}},[t._v("ABIERTA")])])]),t._v(" "),a("p",[a("button",{ref:"btnSave",staticClass:"btn btn-success btn-lg"},[a("i",{staticClass:"fa fa-save"}),t._v(" Guardar")])])])},staticRenderFns:[]},Et=a("VU/8")(yt.a,wt,!1,null,null,null).exports,xt=a("skco"),$t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){e.preventDefault(),t.save()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tipo de denuncia")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newType.name,expression:"newType.name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.newType.name},on:{input:function(e){e.target.composing||t.$set(t.newType,"name",e.target.value)}}})]),t._v(" "),a("p",[a("button",{ref:"btnSave",staticClass:"btn btn-success btn-lg"},[a("i",{staticClass:"fa fa-save"}),t._v(" Guardar")])])])},staticRenderFns:[]},kt=a("VU/8")(xt.a,$t,!1,null,null,null).exports,jt=a("wRwg"),Dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{on:{submit:function(e){e.preventDefault(),t.sendComplaint()}}},[a("h3",[t._v("Formato de expediente único")]),t._v(" "),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header bg-info text-white "},[t._v("\n                Información personal\n            ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-8"},[t.payload||1!=t.session("role")?a("span",[t._v(t._s(t.user.name))]):a("v-select",{attrs:{options:t.users,label:"name"},model:{value:t.complaint.creator,callback:function(e){t.$set(t.complaint,"creator",e)},expression:"complaint.creator"}})],1),t._v(" "),t.payload?[t._m(1),t._v(" "),a("span",{staticClass:"col-1"},[t._v(t._s(t.user.age))])]:t._e()],2),t._v(" "),t.payload?[a("div",{staticClass:"form-group row"},[t._m(2),t._v(" "),a("span",{staticClass:"col-10"},[t._v(t._s(t.user.area))])]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(3),t._v(" "),a("span",{staticClass:"col-10"},[t._v(t._s(t.user.position))])]),t._v(" "),a("div",{staticClass:"form-group row"},[t._m(4),t._v(" "),a("span",{staticClass:"col-10"},[t._v(t._s(t.user.boss_name)+", "+t._s(t.user.boss_title))])])]:t._e()],2)]),t._v(" "),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header bg-dark text-white"},[t._v("\n                Datos iniciales de la denuncia\n            ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group row"},[a("span",{staticClass:"col-2"},[t._v("Teléfono de contacto")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.complaint.contact_phone,expression:"complaint.contact_phone"}],staticClass:"col-4 form-control",attrs:{type:"text",placeholder:"Teléfono",required:""},domProps:{value:t.complaint.contact_phone},on:{input:function(e){e.target.composing||t.$set(t.complaint,"contact_phone",e.target.value)}}}),t._v(" "),a("span",{staticClass:"col-2"},[t._v("Horario disponible")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.complaint.contact_available,expression:"complaint.contact_available"}],staticClass:"col-4 form-control",attrs:{type:"text",placeholder:"Lun-Vie 9:00-2:00",required:""},domProps:{value:t.complaint.contact_available},on:{input:function(e){e.target.composing||t.$set(t.complaint,"contact_available",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Motivo de la denuncia o queja")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.complaint.description,expression:"complaint.description"}],staticClass:"form-control",attrs:{rows:"5",placeholder:"Descripción general",required:""},domProps:{value:t.complaint.description},on:{input:function(e){e.target.composing||t.$set(t.complaint,"description",e.target.value)}}})])]),t._v(" "),t.stillModify?a("div",{staticClass:"card-footer"},[a("button",{ref:"btnSend",staticClass:"btn btn-success btn-lg float-right"},[a("i",{staticClass:"fa fa-send"}),t._v(" Enviar")])]):t._e()])]),t._v(" "),t.viewRevision?a("div",{staticClass:"card"},[a("div",{staticClass:"card-header bg-success text-white"},[t._v("\n            Revisión de la denuncia\n        ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(e){e.preventDefault(),t.sendReview()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Categoría")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.complaint.type_id,expression:"complaint.type_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.complaint,"type_id",e.target.multiple?a:a[0])}}},t._l(t.types,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Fecha y hora de entrevista inicial")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.review.interview.date,expression:"review.interview.date"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:t.review.interview.date},on:{input:function(e){e.target.composing||t.$set(t.review.interview,"date",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.review.interview.time,expression:"review.interview.time"}],staticClass:"form-control",attrs:{type:"time",required:""},domProps:{value:t.review.interview.time},on:{input:function(e){e.target.composing||t.$set(t.review.interview,"time",e.target.value)}}})])])]),t._v(" "),a("p",[1==t.session("role")&&t.complaint.status_id<3?a("button",{ref:"btnReview",staticClass:"btn btn-warning btn-lg"},[a("i",{staticClass:"fa fa-check"}),t._v(" Aceptar denuncia")]):t._e(),t._v(" "),t.currentStatus>1?a("button",{staticClass:"btn btn-info btn-lg float-right",on:{click:function(e){return e.preventDefault(),t.open(e)}}},[a("i",{staticClass:"fa fa-external-link"}),t._v(" Abrir caso")]):t._e()])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-2"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Nombre")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-1"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Edad")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-2"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Área")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-2"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Puesto")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"col-2"},[e("span",{staticClass:"badge badge-secondary badge-pill"},[this._v("Jefe")])])}]},Nt=a("VU/8")(jt.a,Dt,!1,null,null,null).exports,Tt=a("T1ft"),qt=a.n(Tt),Rt=a("i6vn"),At=a.n(Rt),St=a("PYdf"),Ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.saveEvent(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Fecha del evento")]),t._v(" "),a("app-label",[t._v(t._s(t._f("dateFormat")(t.event_date,!0)))])],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Hora del evento")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.time,expression:"event.time"}],staticClass:"form-control",attrs:{type:"time",step:"1800",required:""},domProps:{value:t.event.time},on:{input:function(e){e.target.composing||t.$set(t.event,"time",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tipo de evento")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.type,expression:"event.type"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.event,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"ENTREVISTA"}},[t._v("ENTREVISTA")]),t._v(" "),a("option",{attrs:{value:"REUNION"}},[t._v("REUNIÓN")])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Asunto")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.subject,expression:"event.subject"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.event.subject},on:{input:function(e){e.target.composing||t.$set(t.event,"subject",e.target.value)}}})]),t._v(" "),t.event_passed?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Acuerdos")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.event.agreements,expression:"event.agreements"}],staticClass:"form-control",attrs:{rows:"5",placeholder:"Acuerdos generados",required:""},domProps:{value:t.event.agreements},on:{input:function(e){e.target.composing||t.$set(t.event,"agreements",e.target.value)}}})]):t._e(),t._v(" "),t.stillModify?a("p",[a("button",{ref:"btnAgenda",staticClass:"btn btn-success btn-lg"},[a("i",{staticClass:"fa fa-calendar"}),t._v(" Agendar")]),t._v(" "),t.event.id?a("button",{ref:"btnDelete",staticClass:"btn btn-danger btn-lg float-right",on:{click:function(e){return e.preventDefault(),t.deleteEvent(e)}}},[a("i",{staticClass:"fa fa-trash"}),t._v(" Eliminar")]):t._e()]):t._e()])},staticRenderFns:[]},Ot=a("VU/8")(St.a,Ft,!1,null,null,null).exports,Pt={props:["payload"],data:function(){return{history:[]}},methods:{openEvent:function(t){Lt.$emit("EventOpen",t)}},created:function(){var t=this;this.$http.get("tracings/search/"+this.payload).then(function(e){t.history=e.data.tracings},function(e){t.Err(e)})}},Mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),t._l(t.history,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(t._f("dateFormat")(e.meeting_date)))]),t._v(" "),a("td",[t._v(t._s(e.type))]),t._v(" "),a("td",[t._v(t._s(e.subject))]),t._v(" "),a("td",[t._v(t._s(t._f("text")(e.agreements)))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-primary",on:{click:function(a){t.openEvent(e)}}},[a("i",{staticClass:"fa fa-search"})])])])})],2)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{width:"50"}},[t._v("Fecha")]),t._v(" "),a("th",{attrs:{width:"50"}},[t._v("Tipo")]),t._v(" "),a("th",[t._v("Asunto")]),t._v(" "),a("th",[t._v("Acuerdos")]),t._v(" "),a("th",{attrs:{width:"30"}})])}]},Ut=a("VU/8")(Pt,Mt,!1,null,null,null).exports;a.d(e,"eventBus",function(){return Lt}),ct.a.vfs=ut.a.pdfMake.vfs,s.a.use(st.a),s.a.use(nt.a),s.a.use(ot.a,{color:"rgb(143, 255, 199)",failedColor:"red",height:"4px"}),s.a.filter("dateFormat",function(t,e){if(t)return e?L()(String(t)).format("DD/MM/YYYY"):L()(String(t)).format("DD/MM/YYYY HH:mm")}),s.a.filter("timeFormat",function(t){if(t)return L()(String(t)).format("HH:mm")}),s.a.filter("year",function(t){if(t)return L()(String(t)).year().toString()}),s.a.filter("text",function(t,e){if(t){var a=e||100;return t.substr(0,a)+(t.length>a?"...":"")}}),s.a.http.options.root="//"+window.location.hostname+("localhost"==window.location.hostname?":8000":"")+"/api/",s.a.http.interceptors.push(function(t){this.$Progress.start();var e=JSON.parse(localStorage.getItem("app-token")||null),a="Bearer "+(e?e.hash:"");return t.headers.set("Authorization",a),function(t){this.$Progress.finish()}}),s.a.component("app-modal",mt),s.a.component("app-title",ft),s.a.component("app-label",_t),s.a.component("v-select",qt.a),s.a.component("calendar-view",At.a),s.a.component("user-form",Ct),s.a.component("question-form",Et),s.a.component("type-form",kt),s.a.component("complaint-form",Nt),s.a.component("complaint-event",Ot),s.a.component("complaint-history",Ut),s.a.mixin(rt.a),s.a.config.productionTip=!1;var Lt=new s.a;new s.a({el:"#app",router:at,components:{App:r},template:"<App/>"})},OoQs:function(t,e){},PGPQ:function(t,e){},PYdf:function(t,e,a){"use strict";(function(t){var s=a("PJh5"),n=a.n(s),i=a("NHnr");e.a={props:["payload"],data:function(){return{event:{}}},computed:{event_date:function(){return this.event.id?this.event.meeting_date:this.payload.date},event_passed:function(){return n()()>n()(this.event_date)},stillModify:function(){return 1==this.session("role")&&this.payload.data.status.id<5}},methods:{saveEvent:function(){var e=this;this.loadButton(this.$refs.btnAgenda),this.event.id?this.$http.put("tracings/"+this.event.id,this.event).then(function(a){e.OK("Evento guardado"),t(".modal").modal("hide"),i.eventBus.$emit("EventSaved",a.data.tracing)},function(t){e.Err(t)}):this.$http.post("tracings",this.event).then(function(a){e.OK("Evento guardado"),t(".modal").modal("hide"),i.eventBus.$emit("EventSaved",a.data.tracing)},function(t){e.Err(t)})},deleteEvent:function(){var e=this;this.Ask("¿Dese eliminar este evento?",function(){e.$http.delete("tracings/"+e.event.id).then(function(a){t(".modal").modal("hide"),i.eventBus.$emit("EventDeleted",e.event)},function(t){e.Err(t)})})}},created:function(){var t=this;this.payload.event?this.$http.get("tracings/"+this.payload.event.id).then(function(e){t.event=e.data.tracing,t.event.date=n()(t.event_date).format("YYYY/MM/DD"),t.event.time=n()(t.event_date).format("HH:mm")},function(e){t.Err(e)}):(this.event.complaint_id=this.payload.data.id,this.event.date=n()(this.event_date).format("YYYY-MM-DD"))}}}).call(e,a("7t+N"))},UdIB:function(t,e){},UwY4:function(t,e){},Xx1i:function(t,e,a){t.exports=a.p+"static/img/ombudsperson_banner.dd61178.png"},c1OQ:function(t,e){},e0XP:function(t,e){},kBvZ:function(t,e){},oQzf:function(t,e,a){"use strict";(function(t){var s=a("NHnr");e.a={props:["payload"],data:function(){return{newQuestion:{}}},methods:{save:function(){var e=this;this.newQuestion&&(this.loadButton(this.$refs.btnSave),this.payload?this.$http.put("questions/"+this.newQuestion.id,this.newQuestion).then(function(a){e.OK("Guardado"),t(".modal").modal("hide"),s.eventBus.$emit("QuestionSaved")},function(t){e.Err(t)}):this.$http.post("questions",this.newQuestion).then(function(a){e.OK("Guardado"),t(".modal").modal("hide"),s.eventBus.$emit("QuestionSaved")},function(t){e.Err(t)}))}},created:function(){var t=this;this.payload&&this.$http.get("questions/"+this.payload).then(function(e){t.newQuestion=e.data.question})}}}).call(e,a("7t+N"))},skco:function(t,e,a){"use strict";(function(t){var s=a("NHnr");e.a={props:["payload"],data:function(){return{newType:{}}},methods:{save:function(){var e=this;this.newType&&(this.loadButton(this.$refs.btnSave),this.payload?this.$http.put("types/"+this.newType.id,this.newType).then(function(a){e.OK("Guardado"),t(".modal").modal("hide"),s.eventBus.$emit("TypeSaved")},function(t){e.Err(t)}):this.$http.post("types",this.newType).then(function(a){e.OK("Guardado"),t(".modal").modal("hide"),s.eventBus.$emit("TypeSaved")},function(t){e.Err(t)}))}},created:function(){var t=this;this.payload&&this.$http.get("types/"+this.payload).then(function(e){t.newType=e.data.type})}}}).call(e,a("7t+N"))},uslO:function(t,e,a){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function n(t){return a(i(t))}function i(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="uslO"},wRwg:function(t,e,a){"use strict";(function(t){var s=a("NHnr"),n=a("PJh5"),i=a.n(n);e.a={props:["payload"],data:function(){return{user:{},complaint:{creator:""},users:[],types:[],review:{type:"",procedure:{type:"",description:""},interview:{}}}},computed:{stillModify:function(){return!this.payload||this.session("id")==this.creator&&1==this.complaint.status.id},creator:function(){return this.complaint.author?this.complaint.author.id:""},currentStatus:function(){return this.complaint.status?this.complaint.status.id:""},viewRevision:function(){return this.payload&&(1==this.session("role")||this.currentStatus>1)}},methods:{getUser:function(t){var e=this;this.$http.get("users/"+t).then(function(t){e.user=t.data.user},function(t){e.Err(t)})},sendComplaint:function(){var e=this;this.loadButton(this.$refs.btnSend),this.payload?this.$http.put("complaints/"+this.complaint.id,this.complaint).then(function(a){e.OK("Denuncia enviada"),t(".modal").modal("hide"),s.eventBus.$emit("ComplaintLoad")},function(t){e.Err(t)}):this.$http.post("complaints",this.complaint).then(function(a){e.OK("Denuncia enviada"),t(".modal").modal("hide"),s.eventBus.$emit("ComplaintLoad")},function(t){e.Err(t)})},sendReview:function(){var e=this;this.loadButton(this.$refs.btnReview),this.review.type=this.complaint.type_id,this.$http.post("complaints/review/"+this.complaint.id,this.review).then(function(a){e.OK("Denuncia revisada"),t(".modal").modal("hide"),s.eventBus.$emit("ComplaintLoad")},function(t){e.Err(t)})},open:function(){t(".modal").modal("hide"),this.$router.push("/complaints/open/"+this.complaint.id)}},created:function(){var t=this;this.payload?this.$http.get("complaints/"+this.payload).then(function(e){t.complaint=e.data.complaint,t.user=e.data.complaint.author,t.types=e.data.types,e.data.complaint.tracings.length&&(t.review.interview.date=i()(e.data.complaint.tracings[0].meeting_date).format("YYYY-MM-DD"),t.review.interview.time=i()(e.data.complaint.tracings[0].meeting_date).format("HH:mm"))},function(e){t.Err(e)}):(this.$http.get("users/search").then(function(e){t.users=e.data.users},function(e){t.Err(e)}),this.getUser(this.session("id")))},watch:{user:function(){this.complaint.creator=this.user}}}}).call(e,a("7t+N"))}},["NHnr"]);
//# sourceMappingURL=app.724c72dd621a32a15db8.js.map